<!DOCTYPE html>
<html lang="en">
<head th:replace="common/head::head(${view.name})"></head>

<body>
<div class="news-head">
    <header th:replace="common/header::header(${currentNavListTop},${breadCrumb})"></header>
</div>
<section th:replace="common/search"></section>
<section th:replace="common/nav"></section>
<section>
    <div class="wrapper news pb50">
        <div class="page-title flexbox _content-sb">
            <h3>[[${view.name}]]</h3>
        </div>

        <div class="article_list">
            <th:block th:if="${#lists.size(currentNavList) > 1}">
                <div class="article_list__nav">
                    <div class="article_list__nav__list">
                        <a class="article_list__nav__item"
                           th:onclick="bm.commonLinkUrl2('/'+[[${current.path}]],[[${current.name}]]);"
                           th:each="current, currentStat : ${currentNavList}"
                           th:classappend="${current.id == view.id} ? 'is-active' : ''"
                           th:title="@{${current.name}}">[[${current.name}]]</a>
                    </div>
                </div>
            </th:block>
            <div class="article_list__main">
<!--                <a  class="article_list__item" th:each="article, articleStat : ${countryGuide.records}" th:onclick="goCountryGuide(${view.id},${article.title})" th:href="@{'/countryGuide/'+${view.id}+'/'+${article.title}}">-->
                <a  class="article_list__item" th:each="article, articleStat : ${countryGuide.records}" th:onclick="goCountryGuide([[${view.id}]],[[${article.title}]])">
                    <div class="article_list__item__body">
                        <div class="article_list__item__title" th:if="${#strings.trim(lang_session) eq 'zh_CN'}">[[${article.title}]]</div>
                        <div class="article_list__item__title" th:if="${#strings.trim(lang_session) eq 'en_US'}">[[${article.enTitle}]]</div>
                        <div class="article_list__item__title" th:if="${#strings.trim(lang_session) eq 'ru_RU'}">[[${article.ruTitle}]]</div>
                        <div class="article_list__item__datetime" th:data-time="${#dates.format(article.createTime,'yyyy-MM-dd')}"></div>
                    </div>
                </a>
            </div>
        </div>
        <div th:replace="common/pagination::pagination(${countryGuide},'')"></div>
    </div>
</section>
<footer th:replace="common/footer"></footer>
<script src="js/jquery.base64.js" type="text/javascript"></script>

<script th:inline="javascript">
    let lang=[[${lang_session}]]
    $('.article_list__item__datetime').each(function () {
        const dataTime = $(this).attr('data-time')
        $(this).text(bm.translateDate(dataTime, lang))
    })

    function goCountryGuide(menuId, title) {
        window.location.href = '/countryGuide/'+menuId+'/'+$.base64.encode(title).replaceAll('+','plus').replaceAll('/','slash')
    }
</script>
</body>
<style>
    a {
        cursor: pointer;
    }
</style>
</html>