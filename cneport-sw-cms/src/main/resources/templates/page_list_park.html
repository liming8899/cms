<!DOCTYPE html>
<html lang="en">
<head th:replace="common/head::head(${view.name})"></head>

<body>
    <header th:replace="common/header::header(${currentNavList},${breadCrumb})"></header>
    <section th:replace="common/search"></section>
    <section th:replace="common/nav"></section>
    <section>
        <div class="wrapper industrialPark">
            <div class="page-title">
                <h3>[[${view.name}]]</h3>
            </div>

            <div class="page-title-switch">
                <div class="switch-item selected" data-tag="1">
                    [[#{OverseasPark}]]
                </div>
                <div class="switch-item" data-tag="0">
                    [[#{DomesticPark}]]
                </div>
            </div>

            <div class="company-grid-wrap2">
                <a th:href="@{'/article/'+${view.id}+'/'+${article.id}}" th:each="article, articleStat : ${articleList.records}">
                    <div class="company-grid-item2">
                        <img th:if="${#strings.trim(lang_session) eq 'zh_CN'}" th:src="@{${article.coverImage}}" th:alt="${article.title}">
                        <img th:if="${#strings.trim(lang_session) eq 'en_US' and !#strings.isEmpty(article.enTitle)}" th:src="@{${article.coverImage}}" th:alt="${article.enTitle}">
                        <img th:if="${#strings.trim(lang_session) eq 'en_US' and #strings.isEmpty(article.enTitle)}" th:src="@{${article.coverImage}}" th:alt="${article.title}">
                        <img th:if="${#strings.trim(lang_session) eq 'ru_RU' and !#strings.isEmpty(article.ruTitle)}" th:src="@{${article.coverImage}}" th:alt="${article.ruTitle}">
                        <img th:if="${#strings.trim(lang_session) eq 'ru_RU' and #strings.isEmpty(article.ruTitle)}" th:src="@{${article.coverImage}}" th:alt="${article.title}">


                        <p th:if="${#strings.trim(lang_session) eq 'zh_CN'}" class="ellipsis1">[[${article.title}]]</p>
                        <p th:if="${#strings.trim(lang_session) eq 'en_US' and !#strings.isEmpty(article.enTitle)}" class="ellipsis1">[[${article.enTitle}]]</p>
                        <p th:if="${#strings.trim(lang_session) eq 'en_US' and #strings.isEmpty(article.enTitle)}" class="ellipsis1">[[${article.title}]]</p>
                        <p th:if="${#strings.trim(lang_session) eq 'ru_RU' and !#strings.isEmpty(article.ruTitle)}" class="ellipsis1">[[${article.ruTitle}]]</p>
                        <p th:if="${#strings.trim(lang_session) eq 'ru_RU' and #strings.isEmpty(article.ruTitle)}" class="ellipsis1">[[${article.title}]]</p>

                        <p th:if="${#strings.trim(lang_session) eq 'zh_CN'}" class="ellipsis2">[[${article.description}]]</p>
                        <p th:if="${#strings.trim(lang_session) eq 'en_US' and !#strings.isEmpty(article.enDescription)}" class="ellipsis2">[[${article.enDescription}]]</p>
                        <p th:if="${#strings.trim(lang_session) eq 'en_US' and #strings.isEmpty(article.enDescription)}" class="ellipsis2">[[${article.description}]]</p>
                        <p th:if="${#strings.trim(lang_session) eq 'ru_RU' and !#strings.isEmpty(article.ruDescription)}" class="ellipsis2">[[${article.ruDescription}]]</p>
                        <p th:if="${#strings.trim(lang_session) eq 'ru_RU' and #strings.isEmpty(article.ruDescription)}" class="ellipsis2">[[${article.description}]]</p>
                    </div>
                </a>
            </div>
            <div th:replace="common/pagination::pagination(${articleList},'?otherSetting='+${otherSetting})"></div>
        </div>
    </section>
    <footer th:replace="common/footer"></footer>
</body>
<script src="js/jquery.base64.js" type="text/javascript"></script>
<script>
    $(document).ready(function () {
        function getUrlParam(name) {
            var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)");
            var r = window.location.search.substr(1).match(reg);
            if (r != null) return unescape(r[2]);
            return null;
        }
        const otherSetting = getUrlParam('otherSetting')
        if (otherSetting) {
            const tag =JSON.parse($.base64.decode(otherSetting)).parkType;
            $(".switch-item").each(function(index, element){
                //国内在前时tag === index，国外在前tag === 1-index
                if (tag === 1-index) {
                    $(element).addClass("selected");
                    $(element).siblings().removeClass("selected");
                }
            })
        }
        $(".switch-item").click(function (event) {
            $(this).addClass("selected");
            $(this).siblings().removeClass("selected");
            var tag = event.currentTarget.dataset.tag;
            const otherSetting = "{\"parkType\":"+tag+"}"
            window.location.href = "/industrialPark?otherSetting="+$.base64.encode(otherSetting)
        });
    })
</script>
</html>