<!DOCTYPE html>
<html lang="en">
<head th:replace="common/head::head(${view.name})"></head>

<body>
<div class="news-head">
    <header th:replace="common/header::header(${currentNavListTop},${breadCrumb})"></header>
</div>
<section th:replace="common/search"></section>
<section th:replace="common/nav"></section>
<section>
    <div class="wrapper news pb50">
        <div class="page-title flexbox _content-sb">
            <h3>[[${view.name}]]</h3>
        </div>
        <div class="article_list">
            <th:block th:if="${#lists.size(currentNavList) > 1}">
                <div class="article_list__nav">
                    <div class="article_list__nav__list">
                        <a class="article_list__nav__item"
                           th:onclick="bm.commonLinkUrl2('/'+[[${current.path}]],[[${current.name}]]);"
                           th:each="current, currentStat : ${currentNavList}"
                           th:classappend="${current.id == view.id} ? 'is-active' : ''"
                           th:title="@{${current.name}}">[[${current.name}]]</a>
                    </div>
                </div>
            </th:block>

            <div class="article_list__main">
                <a  class="article_list__item" th:each="article, articleStat : ${articleList.records}" th:href="@{'/article/'+${view.id}+'/'+${article.id}}">
                    <th:block th:unless="${#strings.isEmpty(article.coverImage)}">
                        <div class="article_list__item__image">
                            <img th:src="@{${article.coverImage}}" th:if="${#strings.trim(lang_session)} eq 'zh_CN'" th:alt="${article.title}" />
                            <img th:src="@{${article.coverImage}}" th:if="${#strings.trim(lang_session)} eq 'en_US'" th:alt="${article.enTitle}" />
                            <img th:src="@{${article.coverImage}}" th:if="${#strings.trim(lang_session)} eq 'ru_RU'" th:alt="${article.ruTitle}" />
                        </div>
                    </th:block>

                    <div class="article_list__item__body">
                        <div class="article_list__item__title" th:if="${#strings.trim(lang_session) eq 'zh_CN'}">[[${article.title}]]</div>
                        <div class="article_list__item__title" th:if="${#strings.trim(lang_session) eq 'en_US' and !#strings.isEmpty(article.enTitle)}">[[${article.enTitle}]]</div>
                        <div class="article_list__item__title" th:if="${#strings.trim(lang_session) eq 'en_US' and #strings.isEmpty(article.enTitle)}">[[${article.title}]]</div>
                        <div class="article_list__item__title" th:if="${#strings.trim(lang_session) eq 'ru_RU' and !#strings.isEmpty(article.ruTitle)}">[[${article.ruTitle}]]</div>
                        <div class="article_list__item__title" th:if="${#strings.trim(lang_session) eq 'ru_RU' and #strings.isEmpty(article.ruTitle)}">[[${article.title}]]</div>
                        <div class="article_list__item__description ellipsis2" th:if="${#strings.trim(lang_session) eq 'zh_CN'}">[[${article.description}]]</div>
                        <div class="article_list__item__description ellipsis2" th:if="${#strings.trim(lang_session) eq 'en_US' and !#strings.isEmpty(article.enDescription)}">[[${article.enDescription}]]</div>
                        <div class="article_list__item__description ellipsis2" th:if="${#strings.trim(lang_session) eq 'en_US' and #strings.isEmpty(article.enDescription)}">[[${article.description}]]</div>
                        <div class="article_list__item__description ellipsis2" th:if="${#strings.trim(lang_session) eq 'ru_RU' and !#strings.isEmpty(article.ruDescription)}">[[${article.ruDescription}]]</div>
                        <div class="article_list__item__description ellipsis2" th:if="${#strings.trim(lang_session) eq 'ru_RU' and #strings.isEmpty(article.ruDescription)}">[[${article.description}]]</div>
                        <div class="article_list__item__datetime" th:data-time="${#dates.format(article.createTime,'yyyy-MM-dd')}"></div>
                    </div>
                </a>
            </div>
        </div>
        <div th:replace="common/pagination::pagination(${articleList},'')"></div>
    </div>
</section>
<footer th:replace="common/footer"></footer>
<script th:inline="javascript">
    let lang=[[${lang_session}]]
    $('.article_list__item__datetime').each(function () {
        const dataTime = $(this).attr('data-time')
        $(this).text(bm.translateDate(dataTime, lang))
    })
</script>
</body>
</html>